<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GhostWall API Log Dashboard</title>
    <style>
        body { background-color: #0f1115; color: #f1f5f9; font-family: 'Segoe UI', sans-serif; padding: 2rem;}
        h1 { color: #3b82f6; }
        ul { margin-top: 2rem; padding-left: 1.5rem; }
        li { background: #1e293b; color: #cbd5e1; margin-bottom: 1rem; padding: 1rem; border-radius: 8px; }
        #clear-btn { padding: 0.5rem 1.5rem; background: #ef4444; color: white; border: none; border-radius: 6px; font-size: 1rem; cursor: pointer; }
        #clear-status { margin-top: 1rem; color: #38bdf8; }
    </style>
</head>
<body>
    <nav style="position: absolute; top: 1rem; left: 1rem;">
        <select onchange="location = this.value;" style="padding: 0.5rem; font-size: 1rem;">
            <option selected disabled>Menu</option>
            <option value="/">Home</option>
            <option value="/dashboard">Dashboard</option>
        </select>
    </nav>

    <h1>GhostWall API Log Dashboard</h1>
    <p style="color:#94a3b8;">
        All logs below come from the real-time API. Latest requests show up instantly.
    </p>
    <button id="clear-btn">Clear Log</button>
    <div id="clear-status"></div>

    <ul id="log-list">
        <li>Loading logs...</li>
    </ul>

    <script>
    const API_URL = "https://ghostwallapi.onrender.com/logs";

    function fetchLogs() {
        fetch(API_URL)
            .then(res => res.json())
            .then(data => {
                const logList = document.getElementById("log-list");
                logList.innerHTML = "";
                if (data.logs && data.logs.length > 0) {
                    data.logs.forEach(entry => {
                        const li = document.createElement("li");
                        li.textContent = entry;
                        logList.appendChild(li);
                    });
                } else {
                    logList.innerHTML = "<li>No logs found.</li>";
                }
            })
            .catch(err => {
                document.getElementById("log-list").innerHTML = "<li style='color:#ef4444'>Error fetching logs.</li>";
            });
    }

    // Refresh logs every 10 seconds
    fetchLogs();
    setInterval(fetchLogs, 10000);

    // Clear log button logic
    document.getElementById("clear-btn").onclick = function () {
        fetch(API_URL, { method: "DELETE" })
            .then(res => res.json())
            .then(data => {
                document.getElementById("clear-status").textContent = data.message || "Log cleared.";
                fetchLogs();
            })
            .catch(() => {
                document.getElementById("clear-status").textContent = "Error clearing log.";
            });
    };
    </script>
</body>
</html>